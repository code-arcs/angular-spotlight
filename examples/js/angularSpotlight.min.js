!function(e){e.fn.autoGrowInput=function(t){return t=e.extend({maxWidth:1e3,minWidth:0,comfortZone:70},t),this.filter("input:text").each(function(){var n=t.minWidth||e(this).width(),s="",o=e(this),l=e("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:o.css("fontSize"),fontFamily:o.css("fontFamily"),fontWeight:o.css("fontWeight"),letterSpacing:o.css("letterSpacing"),whiteSpace:"nowrap"}),i=function(){if(s!==(s=o.val())){var e=s.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");l.html(e);var i=l.width(),r=i+t.comfortZone>=n?i+t.comfortZone:n,c=o.width(),a=c>r&&r>=n||r>n&&r<t.maxWidth;a&&o.width(r)}};l.insertAfter(o),e(this).bind("keyup keydown blur update",i),i()}),this}}(jQuery),angular.module("de.devjs.angular.spotlight",[]).directive("spotlightOverlay",["$timeout","$http","$compile","AngularSpotlight",function(e,t,n,s){function o(){return["$scope",function(t){function n(){t.selectedItem=void 0,t.searchResultsCount=0,t.searchResults=[],t.searchInputInfo=void 0,t.searchTerm=""}function o(){var e=g();e-1>=0&&c(e-1)}function l(){var e=g();e+1<t.searchResultsCount&&c(e+1)}function c(e){var n=0;t.searchResults.forEach(function(s){s.items.length>0&&s.items.forEach(function(o){var l=n===(e||0);o.active=l,n++,l&&(t.selectedItem=o,t.selectedCategory=s,a(s.name))})}),t.selectedItemIndex=e}function a(e){0===t.searchTerm.length?t.searchInputInfo=s.getSearchInputInfoSearching():0===t.searchResultsCount?t.searchInputInfo=s.getSearchInputInfoNoResults():t.selectedItem&&(t.searchInputInfo=t.selectedItem.name+" - "+e)}function g(){return t.selectedItemIndex||0}function u(){var e=r.find("li.ng-spotlight-results-list-item.active"),t=r.find(".ng-spotlight-results-list"),n=e.position().top,s=e.position().top+e.outerHeight(),o=t.height(),l=t.scrollTop();if(0>o-s&&t.scrollTop(l+Math.abs(o-s)),0>n){var i=0;0===e.parent().find("li").index(e)&&(i=$(".ng-spotlight-results-list-header:first").outerHeight()),t.scrollTop(l+n-i)}}t.searchInputInfo=s.getSearchInputInfoSearching(),t.spotlightPlaceholder=s.getSpotlightPlaceholder(),t.search=function(){t.searchTerm.length>0&&s.search(t.searchTerm).then(function(e){t.searchResults=e,t.searchResultsCount=t.searchResults.map(function(e){return e.items.length}).reduce(function(e,t){return e+t},0),a(),c(0)})},t.getIconForType=function(e){return s.getIconDescriptorForType(e)},t.showResultItem=function(e,n){for(var s=0,o=0;o<t.searchResults.length&&t.searchResults[o].name!==e;o++)s+=t.searchResults[o].items.length;c(s+n),r.find("input").focus().select()},t.handleKeyDown=function(e){switch(e.keyCode){case i.UP:e.preventDefault(),o();break;case i.DOWN:e.preventDefault(),l();break;case i.ESC:n();break;case i.ENTER:t.openResultItem()}},t.openResultCategory=function(){console.log(t.selectedCategory)},t.openResultItem=function(){t.selectedItem.href&&(window.location.href=t.selectedItem.href,r.hide())},t.$watch("selectedItemIndex",function(){e(function(){void 0!==t.selectedItemIndex&&u()},100)})}]}function l(e,t){function n(){r.toggle(),r.is(":visible")&&r.find("input").focus().select()}r=$(t),$('[data-toggle="ng-spotlight"]').on("click",function(e){e.stopPropagation(),n()}),$(document).on("keydown",function(e){e.ctrlKey&&e.keyCode===s.getSpotlightToggleCtrlKey()&&(e.preventDefault(),n())}).on("click",function(e){0===$(e.target).closest(".ng-spotlight").length?r.hide():r.find("input").focus()}),r.find(".ng-spotlight-input").autoGrowInput({maxWidth:400,minWidth:10,comfortZone:15})}const i={UP:38,DOWN:40,ESC:27,ENTER:13};var r;return{restrict:"E",replace:!0,controller:o(),link:l,templateUrl:"spotlight/directive/spotlightOverlayTemplate.html"}}]),angular.module("de.devjs.angular.spotlight").directive("spotlightDetails",["$compile","AngularSpotlight",function(e,t){function n(n,s){function o(e){return new RegExp(".html?$").test(e)}n.getContentUrl=function(){return n.templateUrl},n.$watch("selectedItem",function(){if(n.selectedItem){var l=t.getTemplateForType(n.selectedItem.type);o(l)&&(n.templateUrl=l,l=angular.element('<div ng-include="getContentUrl()"></div>')),s.html(l).show(),e(s.contents())(n)}})}return{restrict:"E",link:n}}]),angular.module("de.devjs.angular.spotlight").run(["$templateCache",function(e){e.put("spotlight/directive/spotlightOverlayTemplate.html",'<div class="ng-spotlight ng-spotlight-overlay" ng-keydown="handleKeyDown($event)">\n    <div class="ng-spotlight-searchbar">\n        <div class="ng-spotlight-icon">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"  viewBox="0 0 283.753 284.51" enable-background="new 0 0 283.753 284.51" xml:space="preserve">\n            <path d="M281.394,264.378l0.135-0.135L176.24,158.954c30.127-38.643,27.45-94.566-8.09-130.104\n	c-38.467-38.467-100.833-38.467-139.3,0c-38.467,38.467-38.466,100.833,0,139.299c35.279,35.279,90.644,38.179,129.254,8.748\n	l103.859,103.859c0.01,0.01,0.021,0.021,0.03,0.03l1.495,1.495l0.134-0.134c2.083,1.481,4.624,2.36,7.375,2.36\n	c7.045,0,12.756-5.711,12.756-12.756C283.753,269.002,282.875,266.462,281.394,264.378z M47.388,149.612\n	c-28.228-28.229-28.229-73.996,0-102.225c28.228-28.229,73.996-28.228,102.225,0.001c28.229,28.229,28.229,73.995,0,102.224\n	C121.385,177.841,75.617,177.841,47.388,149.612z"/>\n            </svg>\n        </div>\n\n        <input class="ng-spotlight-input" ng-class="{\'empty\': searchTerm.length === 0}" type="text" placeholder="{{spotlightPlaceholder}}" ng-model="searchTerm" ng-change="search()" ng-model-options="{debounce: 250}"/>\n\n        <div class="ng-spotlight-input-after" ng-if="searchInputInfo.length > 0  && searchTerm.length > 0">&mdash; {{searchInputInfo}}</div>\n        <div class="ng-spotlight-results-icon" ng-if="searchTerm.length > 0">\n            <img ng-if="getIconForType(selectedItem.type).type == \'url\'" class="ng-spotlight-item-icon" ng-src="{{getIconForType(selectedItem.type).data}}" width="32" height="32">\n            <div ng-if="getIconForType(selectedItem.type).type == \'css\'" class="ng-spotlight-item-icon {{getIconForType(selectedItem.type).data}}"></div>\n        </div>\n    </div>\n    <div class="ng-spotlight-results-panel" ng-if="searchTerm && searchTerm.length > 0 && searchResultsCount > 0" >\n        <div class="ng-spotlight-results-list" ng-keydown="handleKeyDown($event)">\n            <ul>\n                <li class="ng-spotlight-results-category" ng-repeat="searchResult in searchResults" ng-dblclick="openResultCategory()">\n                    <div class="ng-spotlight-results-list-header">{{searchResult.name}}</div>\n                    <ul>\n                        <li class="ng-spotlight-results-list-item"\n                            ng-repeat="resultItem in searchResult.items"\n                            ng-class="{\'active\': resultItem.active === true}"\n                            ng-click="showResultItem(searchResult.name, $index)"\n                            ng-dblclick="openResultItem()">\n\n                            <img ng-if="getIconForType(resultItem.type).type == \'url\'" class="ng-spotlight-item-icon" ng-src="{{getIconForType(resultItem.type).data}}">\n                            <div ng-if="getIconForType(resultItem.type).type == \'css\'" class="ng-spotlight-item-icon {{getIconForType(resultItem.type).data}}"></div>\n\n                            {{resultItem.name}}\n\n                            <span class="info" ng-if="resultItem.info">\n                                &ndash; {{resultItem.info}}\n                            </span>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n        <div class="ng-spotlight-results-detail">\n            <spotlight-details></spotlight-details>\n        </div>\n    </div>\n</div>')}]),angular.module("de.devjs.angular.spotlight").provider("AngularSpotlight",function(){function e(){function e(e){Object.keys(e).forEach(function(t){n[t.toLowerCase()]=e[t]})}function t(e){function t(e){var e=e.toLowerCase();return 0===e.indexOf("http")||0===e.indexOf("data:")?"url":"css"}var s=n[(e||"default").toLowerCase()]||n["default"];return{data:s,type:t(s)}}var n={"default":"fa fa-file"};return{addIcons:e,getIconForType:t}}function t(){function e(e){Object.keys(e).forEach(function(t){n[t.toLowerCase()]=e[t]})}function t(e){return n[(e||"default").toLowerCase()]||n["default"]}var n={"default":'<div class="ng-spotlight-results-detail-default"><img ng-if="getIconForType(selectedItem.type).type == \'url\'" class="ng-spotlight-item-icon" ng-src="{{getIconForType(selectedItem.type).data}}" width="64" height="64"><div ng-if="getIconForType(selectedItem.type).type == \'css\'" class="ng-spotlight-item-icon {{getIconForType(selectedItem.type).data}}"></div><div class="name">{{selectedItem.name}}</div></div>'};return{addTemplates:e,getTemplateForType:t}}function n(){function e(e){a=e}function t(){return a}function n(e){g=e}function s(){return g}function o(e){u=e}function l(){return u}function i(e){h=e}function r(){return h}const c=32;var a="Suchend ...",g="Keine Ergebnisse",u="Spotlight-Suche",h=c;return{setSearchInputInfoSearching:e,getSearchInputInfoSearching:t,setSearchInputInfoNoResults:n,getSearchInputInfoNoResults:s,setSpotlightPlaceholder:o,getSpotlightPlaceholder:l,setSpotlightToggleCtrlKey:i,getSpotlightToggleCtrlKey:r}}var s=e(),o=t(),l=n();return{search:function(){throw"You have to implement a search function using AngularSpotlightProvider!"},addIcons:s.addIcons,addTemplates:o.addTemplates,setSearchInputInfoSearching:l.setSearchInputInfoSearching,setSearchInputInfoNoResults:l.setSearchInputInfoNoResults,setSpotlightPlaceholder:l.setSpotlightPlaceholder,setSpotlightToggleCtrlKey:l.setSpotlightToggleCtrlKey,$get:["$http","$q",function(e,t){var n=this;return{search:n.search(e,t),getIconDescriptorForType:s.getIconForType,getTemplateForType:o.getTemplateForType,getSearchInputInfoSearching:l.getSearchInputInfoSearching,getSearchInputInfoNoResults:l.getSearchInputInfoNoResults,getSpotlightPlaceholder:l.getSpotlightPlaceholder,getSpotlightToggleCtrlKey:l.getSpotlightToggleCtrlKey}}]}});